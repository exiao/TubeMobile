angular.module('starter.services', [])

.factory('Campaigns', function() {
    // FIXME: Replace with API call
    var campaigns = [
        {
            "campaign_placement_id":1,
            "campaign_placement_key":"YFk8RnlYHwnG4KbFSQor",
            "campaign_key":"U99AkIDItAJ6KupW4cDF",
            "placement_site_id":3,
            "campaign_placement_name":"USA",
            "is_rtb":"F",
            "is_managed":"T",
            "ad_template":"NULL",
            "purchase_type":"NULL",
            "units_purchased":"NULL",
            "price_per_uom":"NULL",
            "status":"Deleted",
            "budget_interval":"day",
            "budget":"1",
            "start_time":"NULL",
            "end_time":"NULL",
            "pacing":"immediate",
            "language":"en",
            "fill_strategy_class":"",
            "fill_strategy_enum":"EVEN",
            "day_parting_json":"NULL",
            "bid_calculator_class":"",
            "max_cpm":"1",
            "created":"2010-02-24 14:14:58",
            "modified":"2014-06-25 12:17:23",
            "deleted":"2011-03-12 16:20:06",
            "campaign_placement_type":"Direct",
            "markup_percentage":0.000000,
            "frequency_cap":"NULL",
            "frequency_cap_interval":"NULL",
            "optimize_on":"views",
            "targeting_segment_id":"NULL",
            "run_level":100,
            "campaign_id":15,
            "survey_exposed":"T",
            "priority":100,
            "package_id":"NULL",
            "additional_markup_price_per_uom":"NULL",
            "additional_markup_uom":"NULL",
            "tags":"NULL",
            "survey_control_placement_id":"NULL",
            "private_feeds_only":"F",
            "exclude_autoplay_preroll":"F",
            "run_simulation":"F",
            "goal_interval":"day",
            "enforce_goal_cap":"F",
            "nielsen_id":"NULL",
            "nielsen_placement_id":"NULL",
            "rate_card_id":16264,
            "min_age":"0",
            "max_age":"0",
            "gender":"all",
            "trps":"0",
            "is_tv":"F",
            "is_grp_media_buy":"F",
            "user_dayparting":"F",
            "is_brandpoint_segments_targeting_optional":"F",
            "is_viewability":"F",
            "is_demographic_segments_disabled":"F",
            "is_brandpoint_placement_otp_decisioning_enabled":"F",
            "nielsen_activation_date":"NULL",
            "ba_placement_id":"NULL",
            "is_custom_ad_scheduling_enabled":"F",
            "exempt_from_pixel_timeout":"F",
            "is_brandpoint_nielsen_disabled":"F",
            "is_ontarget_media_buy":"F",
            "is_cppbi_enabled":"F",
            "average_site_otp":"NULL",
            "average_segment_otp":"NULL",
            "site_safety_block":"F",
            "brandpoint_pricing_applied_on_media":"F",
            "pre_bid_domain_block":"F",
            "post_bid_player_size_block":"F",
            "is_brandaccess":"F"
        }, {
            "campaign_placement_id":2,
            "campaign_placement_key":"ZDaVTWqjG3y7WH6Nlprn",
            "campaign_key":"U99AkIDItAJ6KupW4cDF",
            "placement_site_id":3,
            "campaign_placement_name":"USA - Autoplay",
            "is_rtb":"F",
            "is_managed":"T",
            "ad_template":"NULL",
            "purchase_type":"NULL",
            "units_purchased":"NULL",
            "price_per_uom":"NULL",
            "status":"Inactive",
            "budget_interval":"day",
            "budget":"1",
            "start_time":"NULL",
            "end_time":"NULL",
            "pacing":"immediate",
            "language":"en",
            "fill_strategy_class":"",
            "fill_strategy_enum":"EVEN",
            "day_parting_json":"NULL",
            "bid_calculator_class":"",
            "max_cpm":"1",
            "created":"2010-02-24 14:46:39",
            "modified":"2014-06-25 12:17:23",
            "deleted":"NULL",
            "campaign_placement_type":"Direct",
            "markup_percentage":0.000000,
            "frequency_cap":"NULL",
            "frequency_cap_interval":"NULL",
            "optimize_on":"views",
            "targeting_segment_id":"NULL",
            "run_level":100,
            "campaign_id":15,
            "survey_exposed":"T",
            "priority":100,
            "package_id":"NULL",
            "additional_markup_price_per_uom":"NULL",
            "additional_markup_uom":"NULL",
            "tags":"NULL",
            "survey_control_placement_id":"NULL",
            "private_feeds_only":"F",
            "exclude_autoplay_preroll":"F",
            "run_simulation":"F",
            "goal_interval":"day",
            "enforce_goal_cap":"F",
            "nielsen_id":"NULL",
            "nielsen_placement_id":"NULL",
            "rate_card_id":16266,
            "min_age":"0",
            "max_age":"0",
            "gender":"all",
            "trps":"0",
            "is_tv":"F",
            "is_grp_media_buy":"F",
            "user_dayparting":"F",
            "is_brandpoint_segments_targeting_optional":"F",
            "is_viewability":"F",
            "is_demographic_segments_disabled":"F",
            "is_brandpoint_placement_otp_decisioning_enabled":"F",
            "nielsen_activation_date":"NULL",
            "ba_placement_id":"NULL",
            "is_custom_ad_scheduling_enabled":"F",
            "exempt_from_pixel_timeout":"F",
            "is_brandpoint_nielsen_disabled":"F",
            "is_ontarget_media_buy":"F",
            "is_cppbi_enabled":"F",
            "average_site_otp":"NULL",
            "average_segment_otp":"NULL",
            "site_safety_block":"F",
            "brandpoint_pricing_applied_on_media":"F",
            "pre_bid_domain_block":"F",
            "post_bid_player_size_block":"F",
            "is_brandaccess":"F"
        }, {
            "campaign_placement_id":3,
            "campaign_placement_key":"xZsoW8xXiAnYRhuOD9jZ",
            "campaign_key":"U99AkIDItAJ6KupW4cDF",
            "placement_site_id":3,
            "campaign_placement_name":"YouTube test",
            "is_rtb":"F",
            "is_managed":"T",
            "ad_template":"NULL",
            "purchase_type":"NULL",
            "units_purchased":"NULL",
            "price_per_uom":"NULL",
            "status":"Inactive",
            "budget_interval":"day",
            "budget":"1",
            "start_time":"NULL",
            "end_time":"NULL",
            "pacing":"immediate",
            "language":"en",
            "fill_strategy_class":"",
            "fill_strategy_enum":"EVEN",
            "day_parting_json":"NULL",
            "bid_calculator_class":"",
            "max_cpm":"1",
            "created":"2010-02-24 19:03:00",
            "modified":"2014-06-25 12:17:23",
            "deleted":"NULL",
            "campaign_placement_type":"Direct",
            "markup_percentage":0.000000,
            "frequency_cap":"NULL",
            "frequency_cap_interval":"NULL",
            "optimize_on":"views",
            "targeting_segment_id":"NULL",
            "run_level":100,
            "campaign_id":15,
            "survey_exposed":"T",
            "priority":100,
            "package_id":"NULL",
            "additional_markup_price_per_uom":"NULL",
            "additional_markup_uom":"NULL",
            "tags":"NULL",
            "survey_control_placement_id":"NULL",
            "private_feeds_only":"F",
            "exclude_autoplay_preroll":"F",
            "run_simulation":"F",
            "goal_interval":"day",
            "enforce_goal_cap":"F",
            "nielsen_id":"NULL",
            "nielsen_placement_id":"NULL",
            "rate_card_id":16268,
            "min_age":"0",
            "max_age":"0",
            "gender":"all",
            "trps":"0",
            "is_tv":"F",
            "is_grp_media_buy":"F",
            "user_dayparting":"F",
            "is_brandpoint_segments_targeting_optional":"F",
            "is_viewability":"F",
            "is_demographic_segments_disabled":"F",
            "is_brandpoint_placement_otp_decisioning_enabled":"F",
            "nielsen_activation_date":"NULL",
            "ba_placement_id":"NULL",
            "is_custom_ad_scheduling_enabled":"F",
            "exempt_from_pixel_timeout":"F",
            "is_brandpoint_nielsen_disabled":"F",
            "is_ontarget_media_buy":"F",
            "is_cppbi_enabled":"F",
            "average_site_otp":"NULL",
            "average_segment_otp":"NULL",
            "site_safety_block":"F",
            "brandpoint_pricing_applied_on_media":"F",
            "pre_bid_domain_block":"F",
            "post_bid_player_size_block":"F",
            "is_brandaccess":"F"
        }, {
            "campaign_placement_id":4,
            "campaign_placement_key":"kJLm28b15FGIgbu6mDrb",
            "campaign_key":"aP4VOVZyBCY3WUxHhjc5",
            "placement_site_id":4,
            "campaign_placement_name":"US Viewers",
            "is_rtb":"F",
            "is_managed":"T",
            "ad_template":"NULL",
            "purchase_type":"NULL",
            "units_purchased":"NULL",
            "price_per_uom":"NULL",
            "status":"Inactive",
            "budget_interval":"day",
            "budget":"1",
            "start_time":"NULL",
            "end_time":"NULL",
            "pacing":"immediate",
            "language":"en",
            "fill_strategy_class":"",
            "fill_strategy_enum":"EVEN",
            "day_parting_json":"NULL",
            "bid_calculator_class":"",
            "max_cpm":"1",
            "created":"2010-02-25 02:51:42",
            "modified":"2014-06-25 12:17:23",
            "deleted":"NULL",
            "campaign_placement_type":"Direct",
            "markup_percentage":0.000000,
            "frequency_cap":"NULL",
            "frequency_cap_interval":"NULL",
            "optimize_on":"views",
            "targeting_segment_id":"NULL",
            "run_level":100,
            "campaign_id":16,
            "survey_exposed":"T",
            "priority":100,
            "package_id":"NULL",
            "additional_markup_price_per_uom":"NULL",
            "additional_markup_uom":"NULL",
            "tags":"NULL",
            "survey_control_placement_id":"NULL",
            "private_feeds_only":"F",
            "exclude_autoplay_preroll":"F",
            "run_simulation":"F",
            "goal_interval":"day",
            "enforce_goal_cap":"F",
            "nielsen_id":"NULL",
            "nielsen_placement_id":"NULL",
            "rate_card_id":16550,
            "min_age":"0",
            "max_age":"0",
            "gender":"all",
            "trps":"0",
            "is_tv":"F",
            "is_grp_media_buy":"F",
            "user_dayparting":"F",
            "is_brandpoint_segments_targeting_optional":"F",
            "is_viewability":"F",
            "is_demographic_segments_disabled":"F",
            "is_brandpoint_placement_otp_decisioning_enabled":"F",
            "nielsen_activation_date":"NULL",
            "ba_placement_id":"NULL",
            "is_custom_ad_scheduling_enabled":"F",
            "exempt_from_pixel_timeout":"F",
            "is_brandpoint_nielsen_disabled":"F",
            "is_ontarget_media_buy":"F",
            "is_cppbi_enabled":"F",
            "average_site_otp":"NULL",
            "average_segment_otp":"NULL",
            "site_safety_block":"F",
            "brandpoint_pricing_applied_on_media":"F",
            "pre_bid_domain_block":"F",
            "post_bid_player_size_block":"F",
            "is_brandaccess":"F"
        }
    ];

    return {
        all: function() {
            return campaigns;
        },
        get: function(id) {
            return campaigns.filter(function(campaign) {
                return campaign.campaign_placement_id == id;
            });
        }
    }
})

.factory('Placements', function() {
    var placements = [
        {id: 0, campaign_id: 0, username:'justin.sung@tubemogul.com', name:'placement0'},
        {id: 1, campaign_id: 0, username:'justin.sung@tubemogul.com', name:'placement1'},
        {id: 2, campaign_id: 1, username:'justin.sung@tubemogul.com', name:'placement2'},
        {id: 3, campaign_id: 1, username:'justin.sung@tubemogul.com', name:'placement3'},
        {id: 4, campaign_id: 2, username:'jeff.zhan@tubemogul.com', name:'placement4'},
        {id: 5, campaign_id: 2, username:'jeff.zhan@tubemogul.com', name:'placement5'}
    ];
    
    return {
        all_by_username: function(username) {
            return placements.filter(function(placement) {
                return placement.username == username;
            });
        },
        get: function(id) {
            return placements[id];
        }
    }
})

.factory('CampaignsTest', function($http) {
    // Might use a resource here that returns a JSON array

    // Get campaign data
    return {
        all: function() {
            $http({method: 'GET', url: 'http://stats-api-test01/data/v2/?partner_id=f7a342b291ae48ba67efb36d77b7fc4f873dc064&method=get_feed_by_time&account_id=409290&max_results=500&feed_id=c5C7ckU83rHywnIsw7RN&scope=account&start=2014-07-06&end=2014-08-12&timezone=Australia%2FSydney&date=1407883543&auth=cfda27092cbedb56fe739a9d1db34ea496caa41e'}).
            success(function(data, status, headers, config) {
                return data;
        }).
        error(function(data, status, headers, config) {
            return 'you suck';
        })},
        get: function(friendId) {
            // Simple index lookup
            return friends[friendId];
        }
    }
});
